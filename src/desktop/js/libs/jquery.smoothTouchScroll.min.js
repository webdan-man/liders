!function(a,b,c,d){a.widget("thomaskahn.smoothTouchScroll",{options:{scrollableAreaClass:"scrollableArea",scrollWrapperClass:"scrollWrapper",continuousScrolling:!1,startAtElementId:""},_create:function(){var c=this,d=this.options,e=this.element;e.data("scrollWrapper",e.find("."+d.scrollWrapperClass)),e.data("scrollableArea",e.find("."+d.scrollableAreaClass)),0===e.data("scrollableArea").length&&0===e.data("scrollWrapper").length?(e.wrapInner("<div class='"+d.scrollableAreaClass+"'>").wrapInner("<div class='"+d.scrollWrapperClass+"'>"),e.data("scrollWrapper",e.find("."+d.scrollWrapperClass)),e.data("scrollableArea",e.find("."+d.scrollableAreaClass))):0===e.data("scrollWrapper").length?(e.wrapInner("<div class='"+d.scrollWrapperClass+"'>"),e.data("scrollWrapper",e.find("."+d.scrollWrapperClass))):0===e.data("scrollableArea").length&&(e.data("scrollWrapper").wrapInner("<div class='"+d.scrollableAreaClass+"'>"),e.data("scrollableArea",e.find("."+d.scrollableAreaClass))),e.data("scrollXPos",0),e.data("scrollableAreaWidth",0),e.data("startingPosition",0),e.data("rightScrollingInterval",null),e.data("leftScrollingInterval",null),e.data("previousScrollLeft",0),e.data("getNextElementWidth",!0),e.data("swapAt",null),e.data("startAtElementHasNotPassed",!0),e.data("swappedElement",null),e.data("originalElements",e.data("scrollableArea").children()),e.data("visible",!0),e.data("enabled",!0),e.data("scrollableAreaHeight",e.data("scrollableArea").height()),e.data("enabled")&&e.data("scrollWrapper").kinetic({cursor:"move",decelerate:!0,triggerHardware:!1,y:!1,x:!0,axisTolerance:7,slowdown:.9,maxvelocity:80,throttleFPS:60,moved:function(a){d.continuousScrolling&&(e.data("scrollWrapper").scrollLeft()<=0?c._checkContinuousSwapLeft():c._checkContinuousSwapRight()),c._trigger("touchMoved")},stopped:function(a){c._trigger("touchStopped")}}),a(b).bind("resize",function(){c._trigger("windowResized")})},_init:function(){var a=this;this.element,a.recalculateScrollableArea(),a._trigger("initializationComplete")},recalculateScrollableArea:function(){var b=0,c=!1,d=this.options,e=this.element;e.data("scrollableArea").children().each(function(){d.startAtElementId.length>0&&a(this).attr("id")===d.startAtElementId&&(e.data("startingPosition",b),c=!0),b+=a(this).outerWidth(!0)}),c||e.data("startAtElementId",""),e.data("scrollableAreaWidth",b),e.data("scrollableArea").width(e.data("scrollableAreaWidth")),e.data("scrollWrapper").scrollLeft(e.data("startingPosition")),e.data("scrollXPos",e.data("startingPosition"))},_checkContinuousSwapRight:function(){var b=this.element,c=this.options;if(b.data("getNextElementWidth")&&(c.startAtElementId.length>0&&b.data("startAtElementHasNotPassed")?(b.data("swapAt",a("#"+c.startAtElementId).outerWidth(!0)),b.data("startAtElementHasNotPassed",!1)):b.data("swapAt",b.data("scrollableArea").children(":first").outerWidth(!0)),b.data("getNextElementWidth",!1)),b.data("swapAt")<=b.data("scrollWrapper").scrollLeft()){b.data("swappedElement",b.data("scrollableArea").children(":first").detach()),b.data("scrollableArea").append(b.data("swappedElement"));var d=b.data("scrollWrapper").scrollLeft();b.data("scrollWrapper").scrollLeft(d-b.data("swappedElement").outerWidth(!0)),b.data("getNextElementWidth",!0)}},_checkContinuousSwapLeft:function(){var b=this.element,c=this.options;b.data("getNextElementWidth")&&(c.startAtElementId.length>0&&b.data("startAtElementHasNotPassed")?(b.data("swapAt",a("#"+c.startAtElementId).outerWidth(!0)),b.data("startAtElementHasNotPassed",!1)):b.data("swapAt",b.data("scrollableArea").children(":first").outerWidth(!0)),b.data("getNextElementWidth",!1)),0===b.data("scrollWrapper").scrollLeft()&&(b.data("swappedElement",b.data("scrollableArea").children(":last").detach()),b.data("scrollableArea").prepend(b.data("swappedElement")),b.data("scrollWrapper").scrollLeft(b.data("scrollWrapper").scrollLeft()+b.data("swappedElement").outerWidth(!0)),b.data("getNextElementWidth",!0))},restoreOriginalElements:function(){var a=this,b=this.element;b.data("scrollableArea").html(b.data("originalElements")),a.recalculateScrollableArea(),a.jumpToElement("first")},show:function(){var a=this.element;a.data("visible",!0),a.show()},hide:function(){var a=this.element;a.data("visible",!1),a.hide()},enable:function(){var a=this.element;a.data("scrollWrapper").kinetic("attach"),a.data("enabled",!0)},disable:function(){var a=this.element;a.data("scrollWrapper").kinetic("detach"),a.data("enabled",!1)},destroy:function(){var b=this.element;b.data("scrollableArea").remove(),b.data("scrollWrapper").remove(),b.html(b.data("originalElements")),a.Widget.prototype.destroy.call(this)}})}(jQuery,window,document);